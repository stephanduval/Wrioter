import{_ as ne}from"./AppTextField.vue_vue_type_script_setup_true_lang-DLolXYam.js";import{_ as ve}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-CDQlOFTS.js";import{V as G}from"./VCard-k3dQT3Up.js";import{V as j}from"./VCardText-iX3erHMv.js";import{V as ge}from"./VForm-BECb0SyC.js";import{V as xe}from"./VTable-bdsfC5QT.js";import{V as N}from"./VCheckbox-CL6WmZlr.js";import{d as Z,r as m,Z as Q,w as F,o as v,g as S,f as t,b as e,e as a,v as y,n as o,ah as x,c as R,F as I,i as Y,ag as W,t as C,az as B,aA as E,ap as T,an as L,ao as O,aM as K,aL as se,dj as he,dk as Ve,dl as be,a as ee,y as X,a2 as M,aw as we}from"./main-Ca4qx7y-.js";import{V as ye}from"./VDialog-xsRil5sB.js";import{G as Ue}from"./girl-using-laptop-Zx2hieO9.js";import{a as A,V as te}from"./VRow-EsZ_8CZn.js";import{V as $e}from"./VSpacer-BgKUyuZ2.js";import{V as q}from"./VAvatar-B3k1LwfD.js";import{a as ke}from"./formatters-Cw2xOObF.js";import{_ as Ce}from"./TablePagination.vue_vue_type_script_setup_true_lang-CNnqPXTO.js";import{_ as De}from"./AppSelect.vue_vue_type_script_setup_true_lang-CVASJ1YQ.js";import{_ as Pe}from"./AddNewUserDrawer.vue_vue_type_script_setup_true_lang-o_Nd6ulP.js";import{u as Re}from"./useApi-CB9ZStik.js";import{c as Ae}from"./createUrl-3fObgvGv.js";import{$ as le}from"./api-BzNVkqIw.js";import{V as Me}from"./VDivider-CMgOCZ_h.js";import{V as Se}from"./VDataTableServer-D90LzjZv.js";import{V as Be}from"./VImg-C3GobFkp.js";import{V as Ee}from"./VChip-BPUxCjj5.js";import{V as Te}from"./VMenu-BXWqdo-4.js";import{V as Le,a as oe,b as re}from"./VList-P5iFN8Pn.js";import"./form-C6PetfES.js";import"./VTextField-DA7n0c0j.js";/* empty css                   */import"./VCounter-DbxmW7Y4.js";import"./VField-ZOdg6ueh.js";import"./easing-CjukEv2V.js";import"./VInput-iEBwr0fp.js";import"./forwardRefs-C-GTDzx5.js";import"./VCheckboxBtn-IHz41y0p.js";import"./VSelectionControl-CJpIFID9.js";import"./VOverlay-C-c1GQAd.js";import"./delay-DDujfhaz.js";import"./lazy-He9qliih.js";import"./scopeId-B0kCZn--.js";import"./dialog-transition-ianbTZuP.js";/* empty css              */import"./helpers-DK5QwNv0.js";import"./VPagination-0LcV90vG.js";import"./VSelect-D7uk1eqE.js";import"./AppDrawerHeaderSection.vue_vue_type_script_setup_true_lang-B4ETiiTg.js";import"./vue3-perfect-scrollbar.esm-CLCcbP0n.js";import"./VNavigationDrawer-BW4FC1x1.js";import"./ssrBoot-WXvDeQ_A.js";import"./index-CeW1uQ0r.js";import"./VDataTable-DzfJnxTg.js";import"./filter-BytWbrbk.js";import"./VSlideGroup-DbGP5EjM.js";const Ie={class:"text-h4 text-center mb-2"},je=a("p",{class:"text-body-1 text-center mb-6"}," Set Role Permissions ",-1),ze=a("h5",{class:"text-h5 my-6"}," Role Permissions ",-1),Ne=a("td",null,[a("h6",{class:"text-h6"}," Administrator Access ")],-1),Fe={colspan:"3"},Oe={class:"d-flex justify-end"},qe={class:"text-h6"},Ge={class:"d-flex justify-end"},Qe={class:"d-flex justify-end"},We={class:"d-flex justify-end"},Ze={class:"d-flex align-center justify-center gap-4"},He=Z({__name:"AddEditRoleDialog",props:{rolePermissions:{default:()=>({name:"",permissions:[]})},isDialogVisible:{type:Boolean}},emits:["update:isDialogVisible","update:rolePermissions"],setup(z,{emit:U}){const f=z,h=U,i=m([{name:"User Management",read:!1,write:!1,create:!1},{name:"Content Management",read:!1,write:!1,create:!1},{name:"Disputes Management",read:!1,write:!1,create:!1},{name:"Database Management",read:!1,write:!1,create:!1},{name:"Financial Management",read:!1,write:!1,create:!1},{name:"Reporting",read:!1,write:!1,create:!1},{name:"API Control",read:!1,write:!1,create:!1},{name:"Repository Management",read:!1,write:!1,create:!1},{name:"Payroll",read:!1,write:!1,create:!1}]),_=m(!1),b=m(""),u=m(),V=Q(()=>{let n=0;return i.value.forEach(d=>{Object.entries(d).forEach(([$,D])=>{$!=="name"&&D&&n++})}),n}),w=Q(()=>V.value>0&&V.value<i.value.length*3);F(_,n=>{i.value=i.value.map(d=>({...d,read:n,write:n,create:n}))}),F(()=>w,()=>{w.value||(_.value=!1)}),F(()=>i,()=>{V.value===i.value.length*3&&(_.value=!0)},{deep:!0}),F(()=>f,()=>{f.rolePermissions&&f.rolePermissions.permissions.length&&(b.value=f.rolePermissions.name,i.value=i.value.map(n=>{var $;const d=($=f.rolePermissions)==null?void 0:$.permissions.find(D=>D.name===n.name);return d?{...n,...d}:n}))});const r=()=>{var d;const n={name:b.value,permissions:i.value};h("update:rolePermissions",n),h("update:isDialogVisible",!1),_.value=!1,(d=u.value)==null||d.reset()},g=()=>{var n;h("update:isDialogVisible",!1),_.value=!1,(n=u.value)==null||n.reset()};return(n,d)=>{const $=ve,D=ne;return v(),S(ye,{width:n.$vuetify.display.smAndDown?"auto":900,"model-value":f.isDialogVisible,"onUpdate:modelValue":g},{default:t(()=>[e($,{onClick:g}),e(G,{class:"pa-sm-10 pa-2"},{default:t(()=>[e(j,null,{default:t(()=>[a("h4",Ie,y(f.rolePermissions.name?"Edit":"Add New")+" Role ",1),je,e(o(ge),{ref_key:"refPermissionForm",ref:u},{default:t(()=>[e(D,{modelValue:o(b),"onUpdate:modelValue":d[0]||(d[0]=c=>x(b)?b.value=c:null),label:"Role Name",placeholder:"Enter Role Name"},null,8,["modelValue"]),ze,e(xe,{class:"permission-table text-no-wrap mb-6"},{default:t(()=>[a("tr",null,[Ne,a("td",Fe,[a("div",Oe,[e(N,{modelValue:o(_),"onUpdate:modelValue":d[1]||(d[1]=c=>x(_)?_.value=c:null),indeterminate:o(w),"onUpdate:indeterminate":d[2]||(d[2]=c=>x(w)?w.value=c:null),label:"Select All"},null,8,["modelValue","indeterminate"])])])]),(v(!0),R(I,null,Y(o(i),c=>(v(),R("tr",{key:c.name},[a("td",null,[a("h6",qe,y(c.name),1)]),a("td",null,[a("div",Ge,[e(N,{modelValue:c.read,"onUpdate:modelValue":k=>c.read=k,label:"Read"},null,8,["modelValue","onUpdate:modelValue"])])]),a("td",null,[a("div",Qe,[e(N,{modelValue:c.write,"onUpdate:modelValue":k=>c.write=k,label:"Write"},null,8,["modelValue","onUpdate:modelValue"])])]),a("td",null,[a("div",We,[e(N,{modelValue:c.create,"onUpdate:modelValue":k=>c.create=k,label:"Create"},null,8,["modelValue","onUpdate:modelValue"])])])]))),128))]),_:1}),a("div",Ze,[e(W,{onClick:r},{default:t(()=>[C(" Submit ")]),_:1}),e(W,{color:"secondary",variant:"tonal",onClick:g},{default:t(()=>[C(" Cancel ")]),_:1})])]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}}),Je={class:"text-body-1"},Ke={class:"v-avatar-group"},Xe={class:"d-flex justify-space-between align-center"},Ye={class:"text-h5 mb-1"},et={class:"d-flex align-center"},tt=["onClick"],at=["src"],st=a("div",{class:"text-end"},[C(" Add new role,"),a("br"),C(" if it doesn't exist. ")],-1),lt=Z({__name:"RoleCards",setup(z){const U=m([{role:"Administrator",users:[B,E,T,L],details:{name:"Administrator",permissions:[{name:"User Management",read:!0,write:!0,create:!0},{name:"Disputes Management",read:!0,write:!0,create:!0},{name:"API Control",read:!0,write:!0,create:!0}]}},{role:"Manager",users:[B,E,T,L,O,K,se],details:{name:"Manager",permissions:[{name:"Reporting",read:!0,write:!0,create:!1},{name:"Payroll",read:!0,write:!0,create:!0},{name:"User Management",read:!0,write:!0,create:!0}]}},{role:"Users",users:[B,E,T,L,O],details:{name:"Users",permissions:[{name:"User Management",read:!0,write:!1,create:!1},{name:"Content Management",read:!0,write:!1,create:!1},{name:"Disputes Management",read:!0,write:!1,create:!1},{name:"Database Management",read:!0,write:!1,create:!1}]}},{role:"Support",users:[B,E,T,L,O,K],details:{name:"Support",permissions:[{name:"Repository Management",read:!0,write:!0,create:!1},{name:"Content Management",read:!0,write:!0,create:!1},{name:"Database Management",read:!0,write:!0,create:!1}]}},{role:"Restricted User",users:[B,E,T,L,O,K,se,he,Ve,be],details:{name:"Restricted User",permissions:[{name:"User Management",read:!0,write:!1,create:!1},{name:"Content Management",read:!0,write:!1,create:!1},{name:"Disputes Management",read:!0,write:!1,create:!1},{name:"Database Management",read:!0,write:!1,create:!1}]}}]),f=m(!1),h=m(),i=m(!1),_=b=>{f.value=!0,h.value=b};return(b,u)=>{const V=ee("IconBtn"),w=He;return v(),R(I,null,[e(te,null,{default:t(()=>[(v(!0),R(I,null,Y(o(U),r=>(v(),S(A,{key:r.role,cols:"12",sm:"6",lg:"4"},{default:t(()=>[e(G,null,{default:t(()=>[e(j,{class:"d-flex align-center pb-4"},{default:t(()=>[a("div",Je," Total "+y(r.users.length)+" users ",1),e($e),a("div",Ke,[(v(!0),R(I,null,Y(r.users,(g,n)=>(v(),R(I,{key:g},[r.users.length>4&&r.users.length!==4&&n<3?(v(),S(q,{key:0,image:g},null,8,["image"])):X("",!0),r.users.length===4?(v(),S(q,{key:1,image:g},null,8,["image"])):X("",!0)],64))),128)),r.users.length>4?(v(),S(q,{key:0,color:b.$vuetify.theme.current.dark?"#373B50":"#EEEDF0"},{default:t(()=>[a("span",null," +"+y(r.users.length-3),1)]),_:2},1032,["color"])):X("",!0)])]),_:2},1024),e(j,null,{default:t(()=>[a("div",Xe,[a("div",null,[a("h5",Ye,y(r.role),1),a("div",et,[a("a",{href:"javascript:void(0)",onClick:g=>_(r.details)}," Edit Role ",8,tt)])]),e(V,{class:"align-self-end"},{default:t(()=>[e(M,{icon:"bx-copy",class:"text-disabled"})]),_:1})])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(A,{cols:"12",sm:"6",lg:"4"},{default:t(()=>[e(G,{class:"h-100",ripple:!1},{default:t(()=>[e(te,{"no-gutters":"",class:"h-100"},{default:t(()=>[e(A,{cols:"6",class:"d-flex flex-column justify-end align-center mt-5"},{default:t(()=>[a("img",{width:"105",src:o(Ue)},null,8,at)]),_:1}),e(A,{cols:"6"},{default:t(()=>[e(j,{class:"d-flex flex-column align-end justify-end gap-4"},{default:t(()=>[e(W,{size:"small",onClick:u[0]||(u[0]=r=>i.value=!0)},{default:t(()=>[C(" Add New Role ")]),_:1}),st]),_:1})]),_:1})]),_:1})]),_:1}),e(w,{"is-dialog-visible":o(i),"onUpdate:isDialogVisible":u[1]||(u[1]=r=>x(i)?i.value=r:null)},null,8,["is-dialog-visible"])]),_:1})]),_:1}),e(w,{"is-dialog-visible":o(f),"onUpdate:isDialogVisible":u[2]||(u[2]=r=>x(f)?f.value=r:null),"role-permissions":o(h),"onUpdate:rolePermissions":u[3]||(u[3]=r=>x(h)?h.value=r:null)},null,8,["is-dialog-visible","role-permissions"])],64)}}}),ot={class:"d-flex align-start flex-column flex-sm-row flex-wrap gap-4"},rt={style:{"inline-size":"15.625rem"}},nt={style:{"inline-size":"9.375rem"}},it={style:{"inline-size":"9.375rem"}},ut={class:"d-flex align-center gap-x-4"},dt={key:1},mt={class:"d-flex flex-column"},ct={class:"text-base"},pt={class:"text-sm"},ft={class:"d-flex align-center gap-x-2"},_t={class:"text-capitalize text-high-emphasis text-body-1"},vt={class:"text-body-1 text-high-emphasis text-capitalize"},gt=Z({__name:"UserList",async setup(z){let U,f;const h=m(""),i=m(),_=m(),b=m(),u=m(10),V=m(1),w=m(),r=m(),g=m([]),n=p=>{var l,P;w.value=(l=p.sortBy[0])==null?void 0:l.key,r.value=(P=p.sortBy[0])==null?void 0:P.order},d=[{title:"User",key:"user"},{title:"Role",key:"role"},{title:"Plan",key:"plan"},{title:"Billing",key:"billing"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],{data:$,execute:D}=([U,f]=we(()=>Re(Ae("/apps/users",{query:{q:h,status:b,plan:_,role:i,itemsPerPage:u,page:V,sortBy:w,orderBy:r}}))),U=await U,f(),U),c=Q(()=>$.value.users),k=Q(()=>{var p;return((p=$.value)==null?void 0:p.total)||0});console.log(c.value),console.log(k.value);const ie=[{title:"Admin",value:"admin"},{title:"Author",value:"author"},{title:"Editor",value:"editor"},{title:"Maintainer",value:"maintainer"},{title:"Subscriber",value:"subscriber"}],ue=[{title:"Company",value:"company"},{title:"Team",value:"team"},{title:"Basic",value:"basic"},{title:"Enterprise",value:"enterprise"}],H=p=>{const l=p.toLowerCase();return l==="subscriber"?{color:"success",icon:"bx-user"}:l==="admin"?{color:"primary",icon:"bx-crown"}:l==="maintainer"?{color:"info",icon:"bx-pie-chart-alt"}:l==="editor"?{color:"warning",icon:"bx-edit"}:l==="author"?{color:"error",icon:"bx-desktop"}:{color:"success",icon:"bx-user"}},de=p=>{const l=p.toLowerCase();return l==="pending"?"warning":l==="active"?"success":l==="inactive"?"secondary":"primary"},J=m(!1),me=async p=>{await le("/apps/users",{method:"POST",body:p}),D()},ce=async p=>{await le(`/apps/users/${p}`,{method:"DELETE"});const l=g.value.findIndex(P=>P===p);l!==-1&&g.value.splice(l,1),D()};return(p,l)=>{const P=De,pe=ne,fe=ee("RouterLink"),ae=ee("IconBtn"),_e=Ce;return v(),R("section",null,[e(G,null,{default:t(()=>[e(j,{class:"d-flex flex-md-row flex-column justify-space-between gap-4"},{default:t(()=>[e(P,{"model-value":o(u),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":l[0]||(l[0]=s=>u.value=parseInt(s,10))},null,8,["model-value"]),a("div",ot,[a("div",rt,[e(pe,{modelValue:o(h),"onUpdate:modelValue":l[1]||(l[1]=s=>x(h)?h.value=s:null),placeholder:"Search User"},null,8,["modelValue"])]),a("div",nt,[e(P,{modelValue:o(i),"onUpdate:modelValue":l[2]||(l[2]=s=>x(i)?i.value=s:null),placeholder:"Select Role",items:ie,clearable:"","clear-icon":"bx-x"},null,8,["modelValue"])]),a("div",it,[e(P,{modelValue:o(_),"onUpdate:modelValue":l[3]||(l[3]=s=>x(_)?_.value=s:null),placeholder:"Select Plan",items:ue,clearable:"","clear-icon":"bx-x"},null,8,["modelValue"])])])]),_:1}),e(Me),e(Se,{"items-per-page":o(u),"onUpdate:itemsPerPage":l[5]||(l[5]=s=>x(u)?u.value=s:null),"model-value":o(g),"onUpdate:modelValue":l[6]||(l[6]=s=>x(g)?g.value=s:null),page:o(V),"onUpdate:page":l[7]||(l[7]=s=>x(V)?V.value=s:null),"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],items:o(c),"items-length":o(k),headers:d,class:"text-no-wrap","show-select":"","onUpdate:options":n},{"item.user":t(({item:s})=>[a("div",ut,[e(q,{size:"34",variant:s.avatar?void 0:"tonal",color:s.avatar?void 0:H(s.role).color},{default:t(()=>[s.avatar?(v(),S(Be,{key:0,src:s.avatar},null,8,["src"])):(v(),R("span",dt,y(("avatarText"in p?p.avatarText:o(ke))(s.fullName)),1))]),_:2},1032,["variant","color"]),a("div",mt,[a("h6",ct,[e(fe,{to:{name:"apps-user-view-id",params:{id:s.id}},class:"font-weight-medium text-link"},{default:t(()=>[C(y(s.fullName),1)]),_:2},1032,["to"])]),a("div",pt,y(s.email),1)])])]),"item.role":t(({item:s})=>[a("div",ft,[e(M,{size:20,icon:H(s.role).icon,color:H(s.role).color},null,8,["icon","color"]),a("div",_t,y(s.role),1)])]),"item.plan":t(({item:s})=>[a("div",vt,y(s.currentPlan),1)]),"item.status":t(({item:s})=>[e(Ee,{color:de(s.status),size:"small",label:"",class:"text-capitalize"},{default:t(()=>[C(y(s.status),1)]),_:2},1032,["color"])]),"item.actions":t(({item:s})=>[e(ae,{onClick:wt=>ce(s.id)},{default:t(()=>[e(M,{icon:"bx-trash"})]),_:2},1032,["onClick"]),e(ae,null,{default:t(()=>[e(M,{icon:"bx-show"})]),_:1}),e(W,{icon:"",variant:"text",color:"medium-emphasis"},{default:t(()=>[e(M,{icon:"bx-dots-vertical-rounded"}),e(Te,{activator:"parent"},{default:t(()=>[e(Le,null,{default:t(()=>[e(oe,{to:{name:"apps-user-view-id",params:{id:s.id}}},{prepend:t(()=>[e(M,{icon:"bx-show"})]),default:t(()=>[e(re,null,{default:t(()=>[C("View")]),_:1})]),_:2},1032,["to"]),e(oe,{link:""},{prepend:t(()=>[e(M,{icon:"bx-pencil"})]),default:t(()=>[e(re,null,{default:t(()=>[C("Edit")]),_:1})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:t(()=>[e(_e,{page:o(V),"onUpdate:page":l[4]||(l[4]=s=>x(V)?V.value=s:null),"items-per-page":o(u),"total-items":o(k)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","items","items-length"])]),_:1}),e(Pe,{isDrawerOpen:o(J),"onUpdate:isDrawerOpen":l[8]||(l[8]=s=>x(J)?J.value=s:null),onUserData:me},null,8,["isDrawerOpen"])])}}}),xt=a("h4",{class:"text-h4 mb-1"}," Roles List ",-1),ht=a("p",{class:"text-body-1 mb-0"}," A role provided access to predefined menus and features so that depending on assigned role an administrator can have access to what he need ",-1),Vt=a("h4",{class:"text-h4 mb-1 mt-6"}," Total users with their roles ",-1),bt=a("p",{class:"text-body-1 mb-0"}," Find all of your companyâ€™s administrator accounts and their associate roles. ",-1),wa=Z({__name:"index",setup(z){return(U,f)=>(v(),S(te,null,{default:t(()=>[e(A,{cols:"12"},{default:t(()=>[xt,ht]),_:1}),e(A,{cols:"12"},{default:t(()=>[e(lt)]),_:1}),e(A,{cols:"12"},{default:t(()=>[Vt,bt]),_:1}),e(A,{cols:"12"},{default:t(()=>[e(gt)]),_:1})]),_:1}))}});export{wa as default};
